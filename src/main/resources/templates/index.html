<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta th:replace="snippets/head-links"/>
</head>
<body>
<div th:replace="snippets/navbar"></div>

<div class="container">
    <h1 class="">Welcome to Simple Chat!</h1>
    <h3><a th:href="@{/users}">List of Users</a></h3>
    <h3><a th:href="@{/register}">Register</a></h3>
    <h3><a th:href="@{/login}">Login</a></h3>

    <div hx-ext="client-side-templates">
        <!-- hx-trigger="load, click" makes sure that api gets called on page load AND on click  !-->
        <button
                type="button"
                hx-trigger="load, click"
                hx-get="/api/v1/users"
                nunjucks-template="userlist"
                hx-target="#list"
                hx-swap="innerHTML"
        >Reload</button>

        <script id="userlist" type="nunjucks">
            {% for list in lists %}
              <li>
                <strong>{{list.username}}</strong>
                <small>{{list.createdAt}}</small>
              </li>
            {% endfor %}
        </script>

        <ul id="list"></ul>
    </div>
</div>



<div th:replace="snippets/footer"></div>
</body>
</html>